{"version":3,"sources":["../node_modules/@babel/runtime/helpers/esm/slicedToArray.js","../node_modules/@babel/runtime/helpers/esm/arrayWithHoles.js","../node_modules/@babel/runtime/helpers/esm/iterableToArrayLimit.js","../node_modules/@babel/runtime/helpers/esm/nonIterableRest.js","_helpers/history.js","_actions/userActions.js","views/pages/login/Login.js"],"names":["_slicedToArray","arr","i","Array","isArray","_i","Symbol","iterator","_s","_e","_arr","_n","_d","call","next","done","push","value","length","err","unsupportedIterableToArray","TypeError","createBrowserHistory","forceRefresh","login","email","password","dispatch","axios","post","headers","then","response","console","log","JSON","stringify","data","message","localStorage","setItem","loginFailure","loginSuccess","user","document","cookie","access_token","defaults","common","catch","error","type","userConstants","LOGIN_SUCCESS","payload","LOGIN_FAILURE","registerFailure","REGISTER_FAILURE","register","username","repeat","name","password_confirmation","registerSuccess","REGISTER_SUCCESS","Login","React","useState","useDispatch","emailNew","setEmail","passwordNew","setPassword","history","useHistory","submits","setTimeout","parse","getItem","className","md","placeholder","autoComplete","onChange","e","target","xs","color","onClick","style","width","to","active","tabIndex"],"mappings":"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","file":"static/js/10.f2e65b4d.chunk.js","sourcesContent":["import arrayWithHoles from \"./arrayWithHoles.js\";\nimport iterableToArrayLimit from \"./iterableToArrayLimit.js\";\nimport unsupportedIterableToArray from \"./unsupportedIterableToArray.js\";\nimport nonIterableRest from \"./nonIterableRest.js\";\nexport default function _slicedToArray(arr, i) {\n  return arrayWithHoles(arr) || iterableToArrayLimit(arr, i) || unsupportedIterableToArray(arr, i) || nonIterableRest();\n}","export default function _arrayWithHoles(arr) {\n  if (Array.isArray(arr)) return arr;\n}","export default function _iterableToArrayLimit(arr, i) {\n  var _i = arr == null ? null : typeof Symbol !== \"undefined\" && arr[Symbol.iterator] || arr[\"@@iterator\"];\n\n  if (_i == null) return;\n  var _arr = [];\n  var _n = true;\n  var _d = false;\n\n  var _s, _e;\n\n  try {\n    for (_i = _i.call(arr); !(_n = (_s = _i.next()).done); _n = true) {\n      _arr.push(_s.value);\n\n      if (i && _arr.length === i) break;\n    }\n  } catch (err) {\n    _d = true;\n    _e = err;\n  } finally {\n    try {\n      if (!_n && _i[\"return\"] != null) _i[\"return\"]();\n    } finally {\n      if (_d) throw _e;\n    }\n  }\n\n  return _arr;\n}","export default function _nonIterableRest() {\n  throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n}","import { createBrowserHistory } from 'history';\r\n\r\nexport const history = createBrowserHistory(({forceRefresh:true}));\r\n","import { userConstants } from '../_constants/userConstants';\r\nimport axios from \"axios\";\r\n//import { userService } from '../_services/userService';\r\n//import { alertActions } from './alertActions';\r\n//\r\nimport { history } from '../_helpers/history';\r\n\r\nexport const login = (email,password) => {\r\n  return (dispatch) => {\r\n    //console.log(\"test axios:\"+email+password);\r\n    return axios.post(`api/login`, {email:email,password:password},{\r\n      headers:{'Content-Type':'application/json'}\r\n    })\r\n\r\n\r\n      .then(response => {\r\n          console.log(\"test login\"+JSON.stringify(response));\r\n          if(response.data.message){\r\n            let bool = false;\r\n            localStorage.setItem(\"connecté\",JSON.stringify(bool));\r\n\r\n            dispatch(loginFailure(\"error\"));\r\n          }else{\r\n            dispatch(loginSuccess(response.data.user));\r\n            let bool = true;\r\n            localStorage.setItem(\"connecté\",JSON.stringify(bool));\r\n            document.cookie =JSON.stringify(response.data.access_token);\r\n            axios.defaults.headers.common['X-CSRF-TOKEN'] = response.data.access_token;\r\n          }\r\n\r\n\r\n      })\r\n      .catch(error => {\r\n        console.log(error);\r\n        let bool = false;\r\n        localStorage.setItem(\"connecté\",JSON.stringify(bool));\r\n        dispatch(loginFailure(JSON.stringify(error)));\r\n        throw(error);\r\n      });\r\n  };\r\n};\r\n\r\n const loginSuccess =  (data) => {\r\n\r\n  return {\r\n    type: userConstants.LOGIN_SUCCESS,\r\n    payload: data\r\n  }\r\n};\r\n\r\nconst loginFailure =  (error) => {\r\n\r\n return {\r\n   type: userConstants.LOGIN_FAILURE,\r\n   payload: error\r\n }\r\n};\r\n\r\nconst registerFailure =  (error) => {\r\n\r\n return {\r\n   type: userConstants.REGISTER_FAILURE,\r\n   payload: error\r\n }\r\n};\r\n//prévoir failure si existe alors login redirect\r\nexport const register = (email,username,password,repeat) => {\r\n\r\n  return (dispatch) => {\r\n    return axios.post(`api/register`, {email:email,name:username,password:password,password_confirmation:repeat},{\r\n      headers:{'Content-Type':'application/json'}\r\n    })\r\n\r\n\r\n      .then(response => {\r\n          console.log(\"test register\"+JSON.stringify(response));\r\n\r\n\r\n         if(response.data.message){\r\n\r\n           dispatch(registerFailure(JSON.stringify(response.data.message)));\r\n\r\n         }else{\r\n           dispatch(registerSuccess(response.data.user))\r\n\r\n         }\r\n\r\n      })\r\n      .catch(error => {\r\n        dispatch(registerFailure(JSON.stringify(error)));\r\n        console.log(error);\r\n        throw(error);\r\n      });\r\n  };\r\n};\r\n\r\n const registerSuccess =  (data) => {\r\n\r\n  return {\r\n    type: userConstants.REGISTER_SUCCESS,\r\n    payload: data\r\n  }\r\n};\r\n","import React,{useState,useEffect} from 'react'\r\nimport { Link,useHistory } from 'react-router-dom'\r\nimport { useDispatch,useSelector } from 'react-redux';\r\nimport { login } from '../../../_actions/userActions';\r\n//import { history } from '../../../_helpers/history';\r\nimport {\r\n  CButton,\r\n  CCard,\r\n  CCardBody,\r\n  CCardGroup,\r\n  CCol,\r\n  CContainer,\r\n  CForm,\r\n  CInput,\r\n  CInputGroup,\r\n  CInputGroupPrepend,\r\n  CInputGroupText,\r\n  CRow\r\n} from '@coreui/react'\r\nimport CIcon from '@coreui/icons-react'\r\n\r\nconst Login = () => {\r\n  const [isChecked, setIsChecked] = React.useState(false);\r\n  const dispatch = useDispatch();\r\n  const [emailNew, setEmail] = useState('');\r\n  const [passwordNew, setPassword] = useState('');\r\n\r\n  const history = useHistory();\r\n\r\n\r\n\r\n  const routeChange = () =>{\r\n    history.push('/dashboard');\r\n\r\n  }\r\n\r\n  const submits = () =>{\r\n\r\n      dispatch(login(emailNew,passwordNew));\r\n      setTimeout(() => {\r\n\r\n     if(JSON.parse(localStorage.getItem(\"connecté\"))===true){\r\n         routeChange();\r\n     }\r\n\r\n   }, 3000);\r\n\r\n\r\n  }\r\n\r\n  return (\r\n    <div className=\"c-app c-default-layout flex-row align-items-center\">\r\n      <CContainer>\r\n        <CRow className=\"justify-content-center\">\r\n          <CCol md=\"8\">\r\n            <CCardGroup>\r\n              <CCard className=\"p-4\">\r\n                <CCardBody>\r\n                  <CForm>\r\n                    <h1>Login</h1>\r\n                    <p className=\"text-muted\">Sign In to your account</p>\r\n                    <CInputGroup className=\"mb-3\">\r\n                      <CInputGroupPrepend>\r\n                        <CInputGroupText>\r\n                          <CIcon name=\"cil-user\" />\r\n                        </CInputGroupText>\r\n                      </CInputGroupPrepend>\r\n                      <CInput type=\"text\" placeholder=\"Email\" autoComplete=\"email\" name=\"email\" onChange={(e)=>{setEmail(e.target.value)}}/>\r\n                    </CInputGroup>\r\n                    <CInputGroup className=\"mb-4\">\r\n                      <CInputGroupPrepend>\r\n                        <CInputGroupText>\r\n                          <CIcon name=\"cil-lock-locked\" />\r\n                        </CInputGroupText>\r\n                      </CInputGroupPrepend>\r\n                      <CInput type=\"password\" placeholder=\"Password\" autoComplete=\"current-password\" name=\"password\" onChange={(e)=>{setPassword(e.target.value)}}/>\r\n                    </CInputGroup>\r\n                    <CRow>\r\n                      <CCol xs=\"6\">\r\n                        <CButton color=\"primary\" className=\"px-4\" type=\"button\" onClick={()=>{submits()}}>Login</CButton>\r\n                      </CCol>\r\n                      <CCol xs=\"6\" className=\"text-right\">\r\n                        <CButton color=\"link\" className=\"px-0\">Forgot password?</CButton>\r\n                      </CCol>\r\n                    </CRow>\r\n                  </CForm>\r\n                </CCardBody>\r\n              </CCard>\r\n              <CCard className=\"text-white bg-primary py-5 d-md-down-none\" style={{ width: '44%' }}>\r\n                <CCardBody className=\"text-center\">\r\n                  <div>\r\n                    <h2>Sign up</h2>\r\n                    <p>Connectez-vous pour accèder au backoffice</p>\r\n                    <Link to=\"/register\">\r\n                      <CButton color=\"primary\" className=\"btn btn-success\" active tabIndex={-1}>Register Now!</CButton>\r\n                    </Link>\r\n                  </div>\r\n                </CCardBody>\r\n              </CCard>\r\n            </CCardGroup>\r\n          </CCol>\r\n        </CRow>\r\n      </CContainer>\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default Login\r\n"],"sourceRoot":""}