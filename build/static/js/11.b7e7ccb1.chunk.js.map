{"version":3,"sources":["../node_modules/@babel/runtime/helpers/esm/slicedToArray.js","../node_modules/@babel/runtime/helpers/esm/arrayWithHoles.js","../node_modules/@babel/runtime/helpers/esm/iterableToArrayLimit.js","../node_modules/@babel/runtime/helpers/esm/nonIterableRest.js","_helpers/history.js","_actions/userActions.js","views/pages/register/Register.js"],"names":["_slicedToArray","arr","i","Array","isArray","_i","Symbol","iterator","_s","_e","_arr","_n","_d","call","next","done","push","value","length","err","unsupportedIterableToArray","TypeError","createBrowserHistory","forceRefresh","login","email","password","dispatch","axios","post","headers","then","response","console","log","JSON","stringify","data","message","localStorage","setItem","loginFailure","loginSuccess","user","document","cookie","access_token","defaults","common","catch","error","type","userConstants","LOGIN_SUCCESS","payload","LOGIN_FAILURE","registerFailure","REGISTER_FAILURE","register","username","repeat","name","password_confirmation","registerSuccess","REGISTER_SUCCESS","Register","loggingIn","useSelector","state","authentication","loggedIn","useDispatch","useState","emailNew","setEmail","passwordNew","setPassword","usernameNew","setUsername","repeatNew","setRepeat","history","useHistory","submits","getItem","className","md","lg","xl","placeholder","autoComplete","onChange","e","target","color","block","onClick"],"mappings":"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","file":"static/js/11.b7e7ccb1.chunk.js","sourcesContent":["import arrayWithHoles from \"./arrayWithHoles.js\";\nimport iterableToArrayLimit from \"./iterableToArrayLimit.js\";\nimport unsupportedIterableToArray from \"./unsupportedIterableToArray.js\";\nimport nonIterableRest from \"./nonIterableRest.js\";\nexport default function _slicedToArray(arr, i) {\n  return arrayWithHoles(arr) || iterableToArrayLimit(arr, i) || unsupportedIterableToArray(arr, i) || nonIterableRest();\n}","export default function _arrayWithHoles(arr) {\n  if (Array.isArray(arr)) return arr;\n}","export default function _iterableToArrayLimit(arr, i) {\n  var _i = arr == null ? null : typeof Symbol !== \"undefined\" && arr[Symbol.iterator] || arr[\"@@iterator\"];\n\n  if (_i == null) return;\n  var _arr = [];\n  var _n = true;\n  var _d = false;\n\n  var _s, _e;\n\n  try {\n    for (_i = _i.call(arr); !(_n = (_s = _i.next()).done); _n = true) {\n      _arr.push(_s.value);\n\n      if (i && _arr.length === i) break;\n    }\n  } catch (err) {\n    _d = true;\n    _e = err;\n  } finally {\n    try {\n      if (!_n && _i[\"return\"] != null) _i[\"return\"]();\n    } finally {\n      if (_d) throw _e;\n    }\n  }\n\n  return _arr;\n}","export default function _nonIterableRest() {\n  throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n}","import { createBrowserHistory } from 'history';\r\n\r\nexport const history = createBrowserHistory(({forceRefresh:true}));\r\n","import { userConstants } from '../_constants/userConstants';\r\nimport axios from \"axios\";\r\n//import { userService } from '../_services/userService';\r\n//import { alertActions } from './alertActions';\r\n//\r\nimport { history } from '../_helpers/history';\r\n\r\nexport const login = (email,password) => {\r\n  return (dispatch) => {\r\n    //console.log(\"test axios:\"+email+password);\r\n    return axios.post(`api/login`, {email:email,password:password},{\r\n      headers:{'Content-Type':'application/json'}\r\n    })\r\n\r\n\r\n      .then(response => {\r\n          console.log(\"test login\"+JSON.stringify(response));\r\n          if(response.data.message){\r\n            let bool = false;\r\n            localStorage.setItem(\"connecté\",JSON.stringify(bool));\r\n\r\n            dispatch(loginFailure(\"error\"));\r\n          }else{\r\n            dispatch(loginSuccess(response.data.user));\r\n            let bool = true;\r\n            localStorage.setItem(\"connecté\",JSON.stringify(bool));\r\n            document.cookie =JSON.stringify(response.data.access_token);\r\n            axios.defaults.headers.common['X-CSRF-TOKEN'] = response.data.access_token;\r\n          }\r\n\r\n\r\n      })\r\n      .catch(error => {\r\n        console.log(error);\r\n        let bool = false;\r\n        localStorage.setItem(\"connecté\",JSON.stringify(bool));\r\n        dispatch(loginFailure(JSON.stringify(error)));\r\n        throw(error);\r\n      });\r\n  };\r\n};\r\n\r\n const loginSuccess =  (data) => {\r\n\r\n  return {\r\n    type: userConstants.LOGIN_SUCCESS,\r\n    payload: data\r\n  }\r\n};\r\n\r\nconst loginFailure =  (error) => {\r\n\r\n return {\r\n   type: userConstants.LOGIN_FAILURE,\r\n   payload: error\r\n }\r\n};\r\n\r\nconst registerFailure =  (error) => {\r\n\r\n return {\r\n   type: userConstants.REGISTER_FAILURE,\r\n   payload: error\r\n }\r\n};\r\n//prévoir failure si existe alors login redirect\r\nexport const register = (email,username,password,repeat) => {\r\n\r\n  return (dispatch) => {\r\n    return axios.post(`api/register`, {email:email,name:username,password:password,password_confirmation:repeat},{\r\n      headers:{'Content-Type':'application/json'}\r\n    })\r\n\r\n\r\n      .then(response => {\r\n          console.log(\"test register\"+JSON.stringify(response));\r\n\r\n\r\n         if(response.data.message){\r\n\r\n           dispatch(registerFailure(JSON.stringify(response.data.message)));\r\n\r\n         }else{\r\n           dispatch(registerSuccess(response.data.user))\r\n\r\n         }\r\n\r\n      })\r\n      .catch(error => {\r\n        dispatch(registerFailure(JSON.stringify(error)));\r\n        console.log(error);\r\n        throw(error);\r\n      });\r\n  };\r\n};\r\n\r\n const registerSuccess =  (data) => {\r\n\r\n  return {\r\n    type: userConstants.REGISTER_SUCCESS,\r\n    payload: data\r\n  }\r\n};\r\n","import React,{useState} from 'react'\r\nimport {\r\n  CButton,\r\n  CCard,\r\n  CCardBody,\r\n  CCardFooter,\r\n  CCol,\r\n  CContainer,\r\n  CForm,\r\n  CInput,\r\n  CInputGroup,\r\n  CInputGroupPrepend,\r\n  CInputGroupText,\r\n  CRow\r\n} from '@coreui/react'\r\nimport CIcon from '@coreui/icons-react'\r\nimport { useDispatch,useSelector } from 'react-redux';\r\nimport { register,login} from '../../../_actions/userActions';\r\nimport { Link,useHistory } from 'react-router-dom'\r\n\r\n\r\nconst Register = () => {\r\n\r\n  const loggingIn = useSelector(state => state.authentication.loggedIn);\r\n  const dispatch = useDispatch();\r\n  const [emailNew, setEmail] = useState('');\r\n  const [passwordNew, setPassword] = useState('');\r\n  const [usernameNew, setUsername] = useState('');\r\n  const [repeatNew, setRepeat] = useState('');\r\n\r\n  const history = useHistory();\r\n\r\n    const routeChange = () =>{\r\n      let path = `/`;\r\n      history.push(path);\r\n    }\r\n  const submits = () =>{\r\n      dispatch(register(emailNew,usernameNew,passwordNew,repeatNew));\r\n      dispatch(login(emailNew,passwordNew));\r\n             loggingIn===true?\r\n             localStorage.setItem(\"connecté\",\"true\")\r\n             :  localStorage.setItem(\"connecté\",\"false\");\r\n        if(localStorage.getItem(\"connecté\")==\"true\"){\r\n          routeChange();\r\n        }\r\n  }\r\n\r\n\r\n  return (\r\n    <div className=\"c-app c-default-layout flex-row align-items-center\">\r\n      <CContainer>\r\n        <CRow className=\"justify-content-center\">\r\n          <CCol md=\"9\" lg=\"7\" xl=\"6\">\r\n            <CCard className=\"mx-4\">\r\n              <CCardBody className=\"p-4\">\r\n                <CForm>\r\n                  <h1>Register</h1>\r\n                  <p className=\"text-muted\">Create your account</p>\r\n                  <CInputGroup className=\"mb-3\">\r\n                    <CInputGroupPrepend>\r\n                      <CInputGroupText>\r\n                        <CIcon name=\"cil-user\" />\r\n                      </CInputGroupText>\r\n                    </CInputGroupPrepend>\r\n                    <CInput type=\"text\" placeholder=\"Username\" autoComplete=\"username\" name=\"username\" onChange={(e)=>{setUsername(e.target.value)}}/>\r\n                  </CInputGroup>\r\n                  <CInputGroup className=\"mb-3\">\r\n                    <CInputGroupPrepend>\r\n                      <CInputGroupText>@</CInputGroupText>\r\n                    </CInputGroupPrepend>\r\n                    <CInput type=\"text\" placeholder=\"Email\" autoComplete=\"email\" name=\"email\" onChange={(e)=>{setEmail(e.target.value)}}/>\r\n                  </CInputGroup>\r\n                  <CInputGroup className=\"mb-3\">\r\n                    <CInputGroupPrepend>\r\n                      <CInputGroupText>\r\n                        <CIcon name=\"cil-lock-locked\" />\r\n                      </CInputGroupText>\r\n                    </CInputGroupPrepend>\r\n                    <CInput type=\"password\" placeholder=\"Password\" autoComplete=\"new-password\" name=\"password\" onChange={(e)=>{setPassword(e.target.value)}}/>\r\n                  </CInputGroup>\r\n                  <CInputGroup className=\"mb-4\">\r\n                    <CInputGroupPrepend>\r\n                      <CInputGroupText>\r\n                        <CIcon name=\"cil-lock-locked\" />\r\n                      </CInputGroupText>\r\n                    </CInputGroupPrepend>\r\n                    <CInput type=\"password\" placeholder=\"Repeat password\" autoComplete=\"new-password\" name=\"repeatpassword\" onChange={(e)=>{setRepeat(e.target.value)}}/>\r\n                  </CInputGroup>\r\n                  <CButton color=\"success\" block type=\"button\" onClick={()=>{submits()}}>Create Account</CButton>\r\n                </CForm>\r\n              </CCardBody>\r\n\r\n            </CCard>\r\n          </CCol>\r\n        </CRow>\r\n      </CContainer>\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default Register\r\n"],"sourceRoot":""}