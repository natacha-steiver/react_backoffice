{"version":3,"sources":["_components/_crudPage/page.js","_components/_crudPage/langue.js","_components/Form/LangueAddForm.js","_pages/LangueAddPage.js","views/backoffice/langues/Langues.js"],"names":["styles","borderBottom","background","margin","padding","borderRadius","MyImageComponent","props","src","useImage","srcList","imgNew","style","maxWidth","Page","page","name","photo","id","dispatch","pages","useState","namesNew","setNames","setphotos","updateNew","setupdate","setdelete","setimg","useForm","register","handleSubmit","onSubmit","data","a","formdatas","FormData","append","fetch","method","headers","Accept","body","then","response","json","alert","type","crudConstants","UPDATE_PAGE","payload","className","encType","htmlFor","placeholder","onChange","event","target","value","display","fallback","ref","multiple","files","marginRight","onClick","deletepage","Langue","langue","langue_name","langue_iso","langue_id","nameNew","setName","isoNew","setiso","pageNew","setpage","showNew","setShow","setFiles","onFileUpload","preventDefault","file","length","slice","e","console","log","map","el","i","short_name","replace","longueur","JSON","stringify","UPDATE_LANGUE","catch","error","setTimeout","Array","from","onBlur","alt","marginLeft","marginBottom","deleteLangues","LangueAddForm","useDispatch","useSelector","state","langues","clickNew","setClick","photoNew","setphoto","setname","nameAppNew","setnameApp","useEffect","fetchAllLangues","formdata","names","getAll","concat","parse","document","cookie","ADD_LANGUE","marginTop","paddingTop","boxShadow","textAlign","color","fontWeight","fontSize","paddingBottom","clear","onKeyPress","key","keyPress","index","LangueAddPage","Langues","href"],"mappings":"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","file":"static/js/31.5ce71b66.chunk.js","sourcesContent":["\r\nimport React, { useState,Suspense }  from 'react';\r\n\r\nimport { useDispatch,useSelector } from 'react-redux';\r\nimport {updatepage,deletepage,fetchAllpages} from '../../_actions/crudActions';\r\nimport \"./scss/form.scss\";\r\nimport { useForm } from \"react-hook-form\";\r\nimport { crudConstants } from '../../_constants/crudConstants';\r\nimport {useImage} from 'react-image';\r\nconst styles = {\r\n  borderBottom: '2px solid #eee',\r\n  background: '#fafafa',\r\n  margin: '.75rem auto',\r\n  padding: '.6rem 1rem',\r\n  //maxWidth: '90%',\r\n  borderRadius: '7px'\r\n};\r\nfunction MyImageComponent(props) {\r\n  const {src} = useImage({\r\n    srcList: `http://localhost:8000/images/${props.imgNew}`,\r\n  })\r\n\r\n  return <img src={src} style={{maxWidth:\"5rem\"}}/>\r\n}\r\nexport const Page=({ page: { name,photo, id },pages, dispatch }) => {\r\n\r\n  const [namesNew, setNames] = useState('');\r\n  const [photosNew, setphotos] = useState('');\r\n  const [pageNew, setpage] = useState('');\r\n  const [updateNew, setupdate] = useState(false);\r\n  const [deleteNew, setdelete] = useState(false);\r\n  const [imgNew, setimg] = useState(photo);\r\n  const { register, handleSubmit } = useForm();\r\n\r\n  const onSubmit = async(data) => {\r\n    let formdatas = new FormData()\r\n    formdatas.append('photo', data[\"image\"][0]);\r\n    formdatas.append('name',namesNew );\r\n    formdatas.append('id',id );\r\n    if(updateNew==true){\r\n      const res= await fetch(`http://localhost:8000/api/pages`,{method:'POST',headers: {\r\n               Accept: 'application/json',\r\n             },body:formdatas}).then(response=>\r\n        {\r\n          response.json().then(json => {\r\n          if(typeof(json[\"exception\"])!=\"undefined\" || typeof(json[\"errors\"])!=\"undefined\"){\r\n                      alert(\"erreur, vérifiez les champs entrés\");\r\n          }else{\r\n            setimg(json.photo);\r\n             dispatch({\r\n               type: crudConstants.UPDATE_PAGE,\r\n               payload: {\r\n                 id: json.id,\r\n                 name:json.name,\r\n                 photo:json.photo,\r\n               }\r\n\r\n             })\r\n          }\r\n\r\n          });\r\n\r\n\r\n        }\r\n      )\r\n\r\n    }\r\n          setupdate(false);\r\n     setdelete(false);\r\n  };\r\n\r\n\r\n  return (\r\n    <div style={ styles } className=\"container\">\r\n{      /*<h2>{ name }</h2>\r\n      <p>{ puissance }</p>\r\n  <p>page: { page }</p>\r\n*/}\r\n\r\n      <form onSubmit={handleSubmit(onSubmit)}  encType=\"multipart/form-data\" className=\"container col-lg-12 justify-content-center\">\r\n      <div className=\"form-group  col-lg-4 d-xs-block d-md-inline-block group-align\" >\r\n      <label htmlFor=\"name\" className=\"label-row \">Name:</label>\r\n      <input type=\"text\" name=\"name\"  placeholder={name}  onChange={event => setNames(event.target.value)}/>\r\n\r\n      </div>\r\n\r\n      <div className=\"form-group col-lg-4 d-xs-block d-md-inline-block group-align\" >\r\n      <label htmlFor=\"photo\" className=\"label-row\" style={{display:\"none\"}}>photo:</label>\r\n\r\n      <Suspense fallback={<div>Loading... </div>}>\r\n          <MyImageComponent imgNew={imgNew} />\r\n        </Suspense>\r\n      <input\r\n       type=\"file\"\r\n\r\n         id=\"image\"\r\n\r\n         ref={register}\r\n         name=\"image\"\r\n         multiple={false}\r\n         onChange={event => setphotos(event.target.files[0])}\r\n       />\r\n      </div>\r\n\r\n      <button style={{marginRight:\"1em\"}} className=\"btn btn-danger\" type=\"submit\" onClick={() =>{\r\n        setupdate(false);\r\n        setdelete(true);\r\n\r\n        dispatch(deletepage(id));\r\n\r\n      }} >\r\n        Remove\r\n      </button>\r\n\r\n\r\n      <button className=\"btn btn-success\" type=\"submit\" onClick={() =>\r\n    {\r\n\r\n      setupdate(true);\r\n      setdelete(false);\r\n    }\r\n\r\n        } >\r\n        Update\r\n      </button>\r\n\r\n\r\n      </form>\r\n\r\n\r\n\r\n\r\n\r\n    </div>\r\n  );\r\n};\r\n","\r\nimport  { React,useState,useEffect,Suspense }  from 'react';\r\n\r\nimport { useDispatch,useSelector } from 'react-redux';\r\nimport {updateLangues,deleteLangues,fetchAllLangues} from '../../_actions/crudActions';\r\nimport \"./scss/form.scss\";\r\n\r\nimport { crudConstants } from '../../_constants/crudConstants';\r\n\r\nimport {useImage} from 'react-image';\r\nconst styles = {\r\n  borderBottom: '2px solid #eee',\r\n  background: '#fafafa',\r\n  margin: '.75rem auto',\r\n  padding: '.6rem 1rem',\r\n  //maxWidth: '90%',\r\n  borderRadius: '7px'\r\n};\r\n\r\nexport const Langue=({ langue: { langue_name,langue_iso,langue_id},pages, dispatch }) => {\r\n  //console.log(exercice)\r\n\r\n\r\n\r\n\r\n  //const pages = useSelector(state => state.pages.conso);\r\n\r\n  const [nameNew, setName] = useState('');\r\n  const [isoNew, setiso] = useState('');\r\n  const [pageNew, setpage] = useState('');\r\n  const [showNew, setShow] = useState(false);\r\n  const [namesNew, setNames] = useState('');\r\n  const [photoNew, setphoto] = useState('');\r\n  const [updateNew, setupdate] = useState(false);\r\n  const [deleteNew, setdelete] = useState(false);\r\n  const [imgNew, setimg] = useState(pages);\r\n  const [files, setFiles] = useState([]);\r\n\r\n  function onFileUpload(event) {\r\n    event.preventDefault();\r\n    let file = event.target.files[0];\r\n  //  console.log(files);\r\n    if(pages.length<files.length){\r\n      setFiles([...files, file].slice(files.length-pages.length+1,files.length+1));\r\n\r\n    }else{\r\n      setFiles([...files, file]);\r\n\r\n    }\r\n\r\n  }\r\n  // handle submit button for form\r\n  async function handleSubmit(e) {\r\n    e.preventDefault();\r\n\r\n\r\n\r\n    //formdatas files à faire\r\n    let formdatas = new FormData();\r\n\r\n      console.log(files);\r\n\r\n      files.map((el,i)=>{\r\n        formdatas.append('photo'+i, el);\r\n      })\r\n\r\n\r\n\r\n    formdatas.append('name',nameNew );\r\n    let short_name =\"\";\r\n    short_name=nameNew.replace(/[^A-Z0-9]/ig, \"_\");\r\n    formdatas.append('short_name',short_name);\r\n    formdatas.append('iso',isoNew );\r\n    let longueur=pages.length;\r\n\r\n    if(namesNew.length>longueur){\r\n      formdatas.append('name_page',JSON.stringify(namesNew.slice(namesNew.length-longueur,namesNew.length)) );\r\n      formdatas.append('id_page',JSON.stringify(pageNew.slice(pageNew.length-longueur,pageNew.length)) );\r\n    }else{\r\n      formdatas.append('name_page',JSON.stringify(namesNew) );\r\n      formdatas.append('id_page',JSON.stringify(pageNew) );\r\n    }\r\n\r\n    formdatas.append('id',langue_id );\r\n\r\n\r\n      const res= await fetch(`http://localhost:8000/api/langues`,{method:'POST',headers: {\r\n               Accept: 'application/json',\r\n             },body:formdatas}).then(response=>\r\n        {\r\n          response.json().then(json => {\r\n            //console.log(json);\r\n            if(typeof(json[\"exception\"])!=\"undefined\"){\r\n            alert(\"erreur, vérifiez les champs entrés\");\r\n            }else{\r\n              setimg(json[0].photo);\r\n               dispatch({\r\n                 type: crudConstants.UPDATE_LANGUE,\r\n                 payload: json[0]\r\n\r\n               })\r\n            }\r\n\r\n          });\r\n\r\n\r\n        }\r\n      ).catch(error=>{\r\n        console.log(\"error\")\r\n      });\r\n\r\n\r\n     setupdate(false);\r\n     setdelete(false);\r\n  }\r\n\r\n\r\n\r\n\r\n\r\n\r\n  setTimeout(()=>{\r\n     setShow(true);\r\n  },1700)\r\n\r\n  return (\r\n    showNew && <div style={ styles } className=\"container\">\r\n{      /*<h2>{ name }</h2>\r\n      <p>{ iso }</p>\r\n  <p>page: { page }</p>\r\n*/}\r\n\r\n      <form onSubmit={handleSubmit}  encType=\"multipart/form-data\" className=\"container col-lg-12 justify-content-center\">\r\n      <div className=\"form-group  col-lg-4 d-xs-block d-md-inline-block group-align\" >\r\n      <label htmlFor=\"\" className=\"label-row \">Nom de la langue:</label>\r\n      <input type=\"text\" name=\"name\"  placeholder={langue_name}  onChange={event => setName(event.target.value)}/>\r\n      </div>\r\n\r\n      <div className=\"form-group col-lg-4 d-xs-block d-md-inline-block group-align\" >\r\n      <label htmlFor=\"\" className=\"label-row\">ISO de la langue:</label>\r\n      <input type=\"text\" name=\"iso\"  placeholder={langue_iso}    onChange={event => setiso(event.target.value)}/>\r\n\r\n      </div>\r\n\r\n      <div className=\"form-group col-lg-12 d-xs-block d-md-inline-block group-align\" >\r\n      <h4>pages  liés:</h4>\r\n      {Array.from(pages).map((el,i)=>{\r\n        return(\r\n          <div key={\"container\"+i}>\r\n          <div className=\"form-group  col-lg-4 d-xs-block d-md-inline-block group-align\"  style={{display:\"inline-block\"}}>\r\n          <label htmlFor=\"name\">Nom</label>\r\n          <input name={el[\"name\"]} placeholder={el[\"name\"]} type=\"text\"   onBlur={event=>{      event.preventDefault();\r\n\r\n                 setNames([...namesNew,event.target.value]);\r\n                 setpage([...pageNew,el[\"id\"]]);\r\n                 console.log('nameNew'+nameNew+\"ids:\"+pageNew);\r\n}}/>\r\n\r\n          <label htmlFor=\"photo\" className=\"label-row\" style={{display:\"none\"}}>photo:</label>\r\n\r\n      <img src={`http://localhost:8000/images/${el['photo']}`} alt={el['photo']} style={{marginLeft:\"1em\",maxWidth:\"5rem\"}}/>\r\n\r\n          </div>\r\n      <div className=\"form-group  col-lg-4 d-xs-block d-md-inline-block group-align\" >\r\n\r\n      <label htmlFor=\"photo\" className=\"label-row\" style={{display:\"none\"}}>photo:</label>\r\n\r\n      <input\r\n       type=\"file\"\r\n\r\n         id={el['id']}\r\n         name=\"image\"\r\n         multiple={true}\r\n         onChange={onFileUpload}\r\n         style={{marginBottom:\"2em\",marginLeft:\"2em\"}}\r\n\r\n       />\r\n\r\n\r\n          </div>\r\n\r\n          </div>\r\n        )\r\n      }) }\r\n\r\n\r\n\r\n      </div>\r\n\r\n      <button style={{marginRight:\"1em\",marginLeft:\"1em\"}} className=\"btn btn-danger\" type=\"button\" onClick={() =>{\r\n        setupdate(false);\r\n        setdelete(true);\r\n         dispatch(deleteLangues(langue_id))\r\n\r\n      }} >\r\n        Remove\r\n      </button>\r\n\r\n\r\n      <button className=\"btn btn-success\" type=\"submit\" onClick={() =>\r\n    {\r\n      setupdate(true);\r\n      setdelete(false);\r\n      console.log(updateNew);\r\n\r\n    }\r\n        } >\r\n        Update\r\n      </button>\r\n      </form>\r\n\r\n\r\n\r\n\r\n\r\n    </div>\r\n  );\r\n};\r\n","import {React,useEffect,useState} from 'react';\r\n//import { Formik, Field, Form, ErrorMessage, getIn } from 'formik';\r\n//import * as Yup from 'yup';\r\nimport axios from 'axios';\r\nimport { Link } from 'react-router-dom';\r\nimport { useDispatch,useSelector } from 'react-redux';\r\nimport {Page} from \"../_crudPage/page\";\r\nimport {Langue} from \"../_crudPage/langue\";\r\nimport { createLangues,fetchAllLangues,updateLangues,deleteLangues} from '../../_actions/crudActions';\r\nimport { crudConstants } from '../../_constants/crudConstants';\r\nimport { useForm } from \"react-hook-form\";\r\n\r\nconst LangueAddForm = () => {\r\n    const dispatch = useDispatch();\r\n    const pages = useSelector(state => state.pages);\r\n    const langues = useSelector(state => state.langues);\r\n    const [clickNew, setClick] = useState(false);\r\n    const [showNew, setShow] = useState(false);\r\n    const [addNew, setAdd] = useState(false);\r\n    const [photoNew, setphoto] = useState([]);\r\n    const [nameNew, setname] = useState('');\r\n    const [nameAppNew, setnameApp] = useState('');\r\n    const [isoNew, setiso] = useState('');\r\n    const triggerClick =e=>{\r\n    setClick(true);\r\n          dispatch(fetchAllLangues());\r\n      }\r\n\r\n      setTimeout(()=>{\r\n         setShow(true);\r\n      },1700)\r\n\r\n     useEffect((e) => {\r\n\r\n         triggerClick();\r\n         setClick(false);\r\n       },[clickNew]);\r\n\r\n       const keyPress=(event)=>{\r\n         if(event.key === 'Enter'){\r\n           event.preventDefault();\r\n\r\n            setname([...nameNew,event.target.value]);\r\n            //console.log('nameNew'+nameNew);\r\n\r\n           }\r\n       }\r\n\r\n       const { register, handleSubmit } = useForm();\r\n\r\n        const onSubmit = async(data) => {\r\n          console.log(data)\r\n\r\n\r\n\r\n\r\n\r\n          let formdata = new FormData();\r\n          Array.from(data[\"image\"]).map((el,i)=>{\r\n            formdata.append('photo'+i, el);\r\n          })\r\n\r\n          formdata.append('name',nameAppNew);\r\n          let short_name =\"\";\r\n          short_name=nameAppNew.replace(/[^A-Z0-9]/ig, \"_\");\r\n          formdata.append('short_name',short_name);\r\n          formdata.append('iso',isoNew);\r\n          formdata.append('page',JSON.stringify({names:nameNew}));\r\n          console.log(formdata.getAll(\"photos\"));\r\n\r\n          const res= await fetch(\"http://localhost:8000/api/langues\",{method:'POST',headers:{'Authorization': \"Bearer \".concat(JSON.parse(document.cookie)),\r\n                  'Content-Type': 'application/x-www-form-urlencoded'},body:formdata}).then(response=>\r\n            {\r\n              response.json().then(json => {\r\n              //  console.log(json[json.length-1]);\r\n                 dispatch({\r\n                   type: crudConstants.ADD_LANGUE,\r\n                   payload: json[json.length-1]\r\n\r\n\r\n                 });\r\n\r\n              });\r\n\r\n\r\n            }\r\n          )\r\n\r\n\r\n        };\r\n\r\n\r\n    return (\r\n        <section id=\"langueAddForm\" className=\"app-about-section angle-sp\" style={{marginTop:\"20em\", paddingTop: '0'}}>\r\n            <div className=\"container\">\r\n\r\n                <div className=\"row\">\r\n                    <div className=\"col-lg-12\" style={{ marginTop:\"-70px\"}}>\r\n                        <div className=\"col-md-12 col-lg-12\" style={{background: `#ffffff none repeat scroll 0 0`, boxShadow: '0 0 5px rgba(0, 0, 0, 0.2)',padding: \"30px\"}}>\r\n                        <p><span className=\"doubleLine-title\" style={{textAlign:\"left\", color:\"#ff063c\", fontWeight:\"300\", fontSize:\"2em\", paddingBottom: '30px'}}>langues</span><span> (ajouter 2 pages minimum avec leur photo respective (!à l'ordre d'ajout des photos inversé))</span><span style={{clear:'both'}}></span></p>\r\n\r\n\r\n\r\n\r\n                                    <form onSubmit={handleSubmit(onSubmit)} id=\"form\"  encType=\"multipart/form-data\"  className=\"col-lg-12 justify-content-center\">\r\n                                        {/* <div className=\"col-lg-12\"> */}\r\n                                        <div  className=\"form-group col-lg-6 d-md-inline-block\" style={{ color:\"#3d009e\" }}>\r\n                                        <label htmlFor=\"nameApp\">Nom de la langue</label>\r\n                                        <input name=\"nameApp\" type=\"text\"   onBlur={event=>setnameApp(event.target.value)}/>\r\n\r\n                                        </div>\r\n\r\n                                        <div  className=\"form-group col-lg-6 d-md-inline-block\" style={{ color:\"#3d009e\" }}>\r\n                                        <label htmlFor=\"iso\">ISO de la langue </label>\r\n                                        <input name=\"iso\" type=\"text\"   onBlur={event=>setiso(event.target.value)}/>\r\n\r\n                                        </div>\r\n                                        <div  className=\"form-group col-lg-6 d-md-inline-block\" style={{ color:\"#3d009e\" }}>\r\n\r\n                                            <h4>Pages:</h4>\r\n                                            <label htmlFor=\"name\">Nom</label>\r\n                                            <input name=\"name\" type=\"text\"   onKeyPress={event=>keyPress(event)}/>\r\n\r\n\r\n                                        </div>\r\n                                        <div  className=\"form-group col-lg-6 d-md-inline-block\" style={{ color:\"#3d009e\" }}>\r\n                                          {/*  <label htmlFor=\"photo\">Photo</label>\r\n                                            <Field name=\"photo\" type=\"text\" className=\"form-control\" />\r\n                                            <ErrorMessage name=\"photo\" />\r\n                                          */}\r\n                                          <input\r\n                                           type=\"file\"\r\n\r\n                                             id=\"image\"\r\n\r\n                                             ref={register}\r\n                                             name=\"image\"\r\n                                             multiple={true}\r\n                                             onBlur={event =>  setphoto([...photoNew,event.target.files[0]])}\r\n\r\n                                           />\r\n\r\n                                        </div>\r\n                                        <div>\r\n                                        <p>Vos pages:</p>\r\n                                        {Array.from(nameNew).map((el,i)=>{\r\n                                          return (\r\n                                            <div key={i+\"conso\"}>\r\n                                            <li key={i}>{el}</li>\r\n                                            </div>\r\n                                          );\r\n                                        })\r\n\r\n                                        }\r\n                                        </div>\r\n                                        <button  type=\"submit\" className=\"btn btn-primary d-block\" style={{margin:\"1em auto\"}} >Créer</button>\r\n\r\n                                    </form>\r\n\r\n\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n\r\n          {  showNew==true &&    <div>\r\n\r\n            <button style={{display:\"none\"}}  className=\"btn btn-primary\" onClick={()=>{\r\n              dispatch(fetchAllLangues());\r\n              console.log(\"conso1:\"+JSON.stringify(pages));\r\n\r\n            }}>voir</button>\r\n\r\n            {\r\n\r\n\r\n\r\n          langues.length>0 && langues.map((langue,index )=> {\r\n            return (\r\n\r\n              <Langue langue={langue}  pages={langue[0]} key={index} dispatch={dispatch} />\r\n\r\n            );\r\n          })\r\n\r\n\r\n          }\r\n\r\n\r\n\r\n\r\n            </div>}\r\n        </section>\r\n\r\n   );\r\n};\r\n\r\nexport default LangueAddForm;\r\n","import React,{ useState,useEffect } from 'react';\r\n\r\nimport LangueAddForm from '../_components/Form/LangueAddForm';\r\nimport { useDispatch,useSelector } from 'react-redux';\r\n\r\nimport { history } from '../_helpers/history';\r\n//import classes from './RegisterPage.module.scss';\r\n\r\nconst LangueAddPage = (props) => {\r\n\r\n\r\n\r\n\r\n    return (\r\n\r\n            <LangueAddForm />\r\n\r\n    );\r\n}\r\n\r\nexport default LangueAddPage;\r\n","import React, { useEffect, useState, createRef } from 'react'\r\nimport classNames from 'classnames'\r\nimport {\r\n  CRow,\r\n  CCol,\r\n  CCard,\r\n  CCardHeader,\r\n  CCardBody\r\n} from '@coreui/react'\r\nimport { rgbToHex } from '@coreui/utils'\r\nimport { DocsLink } from 'src/reusable'\r\nimport LangueAddPage from \"../../../_pages/LangueAddPage\"\r\n\r\nconst ThemeView = () => {\r\n  const [color, setColor] = useState('rgb(255, 255, 255)')\r\n  const ref = createRef()\r\n\r\n  useEffect(() => {\r\n    const el = ref.current.parentNode.firstChild\r\n    const varColor = window.getComputedStyle(el).getPropertyValue('background-color')\r\n    setColor(varColor)\r\n  }, [ref])\r\n\r\n  return (\r\n    <table className=\"table w-100\" ref={ref}>\r\n      <tbody>\r\n      <tr>\r\n        <td className=\"text-muted\">HEX:</td>\r\n        <td className=\"font-weight-bold\">{ rgbToHex(color) }</td>\r\n      </tr>\r\n      <tr>\r\n        <td className=\"text-muted\">RGB:</td>\r\n        <td className=\"font-weight-bold\">{ color }</td>\r\n      </tr>\r\n      </tbody>\r\n    </table>\r\n  )\r\n}\r\n\r\nconst ThemeColor = ({className, children}) => {\r\n  const classes = classNames(className, 'theme-color w-75 rounded mb-3')\r\n  return (\r\n    <CCol xl=\"2\" md=\"4\" sm=\"6\" xs=\"12\" className=\"mb-4\">\r\n      <div className={classes} style={{paddingTop: '75%'}}></div>\r\n      {children}\r\n      <ThemeView/>\r\n    </CCol>\r\n  )\r\n}\r\n\r\nconst Langues = () => {\r\n  return (\r\n    <>\r\n      <CCard>\r\n        <CCardHeader>\r\n        Langues - gestion\r\n          <DocsLink href=\"https://coreui.io/docs/utilities/colors/\"/>\r\n        </CCardHeader>\r\n        <LangueAddPage/>\r\n      </CCard>\r\n    </>\r\n  )\r\n}\r\n\r\nexport default Langues\r\n"],"sourceRoot":""}