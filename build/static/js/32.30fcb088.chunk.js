(this["webpackJsonp@coreui/coreui-free-react-admin-template"]=this["webpackJsonp@coreui/coreui-free-react-admin-template"]||[]).push([[32],{749:function(e,t,n){"use strict";n.d(t,"a",(function(){return m}));var a=n(723),c=n(713),s=n(724),o=n.n(s),r=n(2),i=(n(138),n(716)),l=(n(728),n(734)),d=n(35),p=n(750),u=n(23),b={borderBottom:"2px solid #eee",background:"#fafafa",margin:".75rem auto",padding:".6rem 1rem",borderRadius:"7px"};function j(e){var t=Object(p.useImage)({srcList:"http://localhost:8000/images/".concat(e.imgNew)}).src;return Object(u.jsx)("img",{src:t,style:{maxWidth:"5rem"}})}var m=function(e){var t=e.page,n=t.name,s=t.photo,p=t.id,m=(e.pages,e.dispatch),h=Object(r.useState)(""),f=Object(c.a)(h,2),g=f[0],O=f[1],x=Object(r.useState)(""),y=Object(c.a)(x,2),v=(y[0],y[1]),N=Object(r.useState)(""),S=Object(c.a)(N,2),k=(S[0],S[1],Object(r.useState)(!1)),w=Object(c.a)(k,2),T=w[0],A=w[1],C=Object(r.useState)(!1),F=Object(c.a)(C,2),P=(F[0],F[1]),D=Object(r.useState)(s),E=Object(c.a)(D,2),J=E[0],z=E[1],B=Object(l.a)(),L=B.register,R=B.handleSubmit,G=function(){var e=Object(a.a)(o.a.mark((function e(t){var n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((n=new FormData).append("photo",t.image[0]),n.append("name",g),n.append("id",p),1!=T){e.next=8;break}return e.next=7,fetch("http://localhost:8000/api/pages",{method:"POST",headers:{Accept:"application/json"},body:n}).then((function(e){e.json().then((function(e){"undefined"!=typeof e.exception||"undefined"!=typeof e.errors?alert("erreur, v\xe9rifiez les champs entr\xe9s"):(z(e.photo),m({type:d.a.UPDATE_PAGE,payload:{id:e.id,name:e.name,photo:e.photo}}))}))}));case 7:e.sent;case 8:A(!1),P(!1);case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(u.jsx)("div",{style:b,className:"container",children:Object(u.jsxs)("form",{onSubmit:R(G),encType:"multipart/form-data",className:"container col-lg-12 justify-content-center",children:[Object(u.jsxs)("div",{className:"form-group  col-lg-4 d-xs-block d-md-inline-block group-align",children:[Object(u.jsx)("label",{htmlFor:"name",className:"label-row ",children:"Name:"}),Object(u.jsx)("input",{type:"text",name:"name",placeholder:n,onChange:function(e){return O(e.target.value)}})]}),Object(u.jsxs)("div",{className:"form-group col-lg-4 d-xs-block d-md-inline-block group-align",children:[Object(u.jsx)("label",{htmlFor:"photo",className:"label-row",style:{display:"none"},children:"photo:"}),Object(u.jsx)(r.Suspense,{fallback:Object(u.jsx)("div",{children:"Loading... "}),children:Object(u.jsx)(j,{imgNew:J})}),Object(u.jsx)("input",{type:"file",id:"image",ref:L,name:"image",multiple:!1,onChange:function(e){return v(e.target.files[0])}})]}),Object(u.jsx)("button",{style:{marginRight:"1em"},className:"btn btn-danger",type:"submit",onClick:function(){A(!1),P(!0),m(Object(i.d)(p))},children:"Remove"}),Object(u.jsx)("button",{className:"btn btn-success",type:"submit",onClick:function(){A(!0),P(!1)},children:"Update"})]})})}},946:function(e,t,n){"use strict";n.r(t);var a=n(713),c=n(2),s=(n(732),n(711)),o=(n(715),n(712)),r=n(723),i=n(724),l=n.n(i),d=(n(437),n(138)),p=n(749),u=n(716),b=n(35),j=n(734),m=n(23),h=function(){var e=Object(d.b)(),t=Object(d.c)((function(e){return e.pages})),n=Object(c.useState)(!1),s=Object(a.a)(n,2),o=s[0],i=s[1],h=Object(c.useState)(!1),f=Object(a.a)(h,2),g=f[0],O=f[1],x=Object(c.useState)([]),y=Object(a.a)(x,2),v=(y[0],y[1]),N=Object(c.useState)(""),S=Object(a.a)(N,2),k=S[0],w=S[1];setTimeout((function(){O(!0)}),1700),Object(c.useEffect)((function(t){i(!0),e(Object(u.g)()),i(!1)}),[o]);var T=Object(j.a)(),A=T.register,C=T.handleSubmit,F=function(){var t=Object(r.a)(l.a.mark((function t(n){var a;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return(a=new FormData).append("photo",n.image[0]),a.append("name",k),t.next=5,fetch("http://localhost:8000/api/pages",{method:"POST",headers:{Authorization:"Bearer ".concat(JSON.parse(document.cookie)),"Content-Type":"application/x-www-form-urlencoded"},body:a}).then((function(t){t.json().then((function(t){e({type:b.a.ADD_PAGE,payload:{id:t.id,name:t.name,photo:t.photo}})}))}));case 5:t.sent;case 6:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();return Object(m.jsxs)("section",{id:"pageAddForm",className:"app-about-section angle-sp",style:{marginTop:"20em",paddingTop:"0"},children:[Object(m.jsx)("div",{className:"container",children:Object(m.jsx)("div",{className:"row",children:Object(m.jsx)("div",{className:"col-lg-12",style:{marginTop:"-70px"},children:Object(m.jsxs)("div",{className:"col-md-12 col-lg-12",style:{background:"#ffffff none repeat scroll 0 0",boxShadow:"0 0 5px rgba(0, 0, 0, 0.2)",padding:"30px"},children:[Object(m.jsxs)("p",{children:[Object(m.jsx)("span",{className:"doubleLine-title",style:{textAlign:"left",color:"#ff063c",fontWeight:"300",fontSize:"2em",paddingBottom:"30px"},children:"Pages"}),Object(m.jsx)("span",{style:{clear:"both"}})]}),Object(m.jsxs)("form",{onSubmit:C(F),id:"form",encType:"multipart/form-data",className:"col-lg-12 justify-content-center",children:[Object(m.jsxs)("div",{className:"form-group col-lg-6 d-md-inline-block",style:{color:"#3d009e"},children:[Object(m.jsx)("label",{htmlFor:"name",children:"Nom"}),Object(m.jsx)("input",{name:"name",type:"text",onChange:function(e){return w(e.target.value)}})]}),Object(m.jsx)("div",{className:"form-group col-lg-6 d-md-inline-block",style:{color:"#3d009e"},children:Object(m.jsx)("input",{type:"file",id:"image",ref:A,name:"image",multiple:!1,onChange:function(e){return v(e.target.files[0])}})}),Object(m.jsx)("button",{type:"submit",className:"btn btn-primary d-block",style:{margin:"1em auto"},children:"add page"})]})]})})})}),1==g&&Object(m.jsxs)("div",{children:[Object(m.jsx)("button",{style:{display:"none"},className:"btn btn-primary",onClick:function(){e(Object(u.g)()),console.log("page1:"+JSON.stringify(t))},children:"voir"}),t.length>0&&t.map((function(n,a){return Object(m.jsx)(p.a,{page:n,pages:t,dispatch:e},n.id)}))]})]})},f=(n(719),function(e){return Object(m.jsx)(h,{})});t.default=function(){return Object(m.jsx)(m.Fragment,{children:Object(m.jsxs)(s.j,{children:[Object(m.jsxs)(s.n,{children:["Pages - gestion",Object(m.jsx)(o.a,{href:"https://coreui.io/docs/utilities/colors/"})]}),Object(m.jsx)(f,{})]})})}}}]);
//# sourceMappingURL=32.30fcb088.chunk.js.map